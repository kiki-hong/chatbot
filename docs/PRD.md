# 제품 요구사항 문서 (PRD): 한의학 AI 컨설턴트

## 1. 개요
### 1.1 목적
**한의학 AI 컨설턴트**는 한의학 관련 정보(약초, 침술, 진단법, 자연 요법 등)를 필요로 하는 사용자(환자, 학생, 연구자)를 돕기 위해 설계된 AI 기반 대화형 에이전트입니다. 이 챗봇은 **검색 증강 생성(RAG)** 기술을 활용하여 신뢰할 수 있는 한의학 서적, 논문, 가이드 문서에 근거한 정확하고 안전한 답변을 제공합니다.

### 1.2 범위
이 시스템은 다음을 포함합니다:
- Next.js 애플리케이션에 내장된 웹 기반 채팅 인터페이스.
- PDF/문서 데이터를 지식 베이스로 변환하는 데이터 처리 파이프라인.
- 로컬 마크다운 파일에서 관련 문맥을 검색하는 RAG 엔진.
- 자연어 생성을 위한 Google Gemini API 연동.
- 품질 관리를 위한 기본적인 대화 로그 저장 기능.

### 1.3 타겟 사용자
- **일반 사용자**: 자신의 증상에 도움이 되는 한방 요법이나 차(Tea) 정보를 찾는 사람.
- **학생/연구자**: 한의학 이론, 본초학 정보 등을 빠르게 검색하고자 하는 학습자.
- **관리자**: 새로운 한의학 자료를 업데이트하고 챗봇을 관리하는 운영자.

## 2. 제품 목표
1.  **신뢰성**: 검증된 한의학 문헌에 근거하여 답변하며, 의학적 조언에 대한 면책 조항을 명확히 합니다.
2.  **접근성**: 어려운 한자어나 전문 용어를 알기 쉽게 풀어서 설명합니다.
3.  **유용성**: 사용자의 증상이나 질문에 맞는 구체적인 약재나 요법을 제안합니다.
4.  **확장성**: 다양한 한의학 분야(침구, 방제, 양생 등)로 지식 베이스를 쉽게 확장할 수 있도록 설계합니다.

## 3. 사용자 스토리
| ID | 행위자 | 스토리 | 인수 기준 |
|----|-------|-------|---------------------|
| US-1 | 사용자 | "소화불량에 좋은 차"를 추천받고 싶다. | 챗봇이 지식 베이스에 있는 약초 정보를 바탕으로 매실차, 생강차 등의 효능과 만드는 법을 안내한다. |
| US-2 | 학생 | "십전대보탕"의 구성 약재와 효능을 알고 싶다. | 챗봇이 해당 처방의 구성 약재 목록과 주 효능을 정확히 나열한다. |
| US-3 | 관리자 | 새로운 논문이나 서적(PDF)을 업로드하여 지식을 추가하고 싶다. | 시스템이 PDF를 텍스트로 변환하여 검색 가능한 지식 베이스에 통합한다. |
| US-4 | 개발자 | 답변의 출처를 확인하고 싶다. | 답변 생성 시 참고한 문서의 파일명이나 섹션이 로그에 남거나 답변에 표시된다. |

## 4. 기능 요구사항

### 4.1 채팅 인터페이스
- **테마**: 한의학의 정서에 맞는 차분하고 자연친화적인 디자인 (Green/Earth 톤).
- **면책 조항**: 대화 시작 시 "이 정보는 의학적 진단을 대체할 수 없음"을 명시.
- **마크다운 지원**: 약재 목록, 복용법 등을 보기 좋게 정렬하여 표시.

### 4.2 RAG 엔진
- **문맥 검색**: `data/` 디렉토리의 한의학 관련 `.md` 파일을 검색.
- **프롬프트 엔지니어링**: 한의사 페르소나를 적용하여 친절하고 전문적인 어조로 답변.
- **안전 장치**: 심각한 질병이나 응급 상황에 대한 질문에는 "병원 방문"을 권유하도록 설정.

### 4.3 데이터 파이프라인
- **입력**: `data/raw` 폴더의 한의학 서적/논문 PDF.
- **처리**: 텍스트 추출 및 마크다운 변환.
- **출력**: 구조화된 마크다운 파일.

### 4.4 로깅 및 분석
- **저장소**: `data/chat_logs.json` 및 Google Sheets.
- **분석**: 자주 묻는 증상이나 약재 키워드 분석.

## 5. 비기능 요구사항
- **정확성**: 잘못된 의학 정보 제공 방지 (Hallucination 최소화).
- **응답 속도**: 3초 이내 응답 시작.
- **데이터 보안**: 사용자 건강 정보 등 민감 데이터는 저장하지 않거나 익명화.

## 6. 기술 아키텍처
- **프레임워크**: Next.js 14+ (App Router)
- **AI 모델**: Google Gemini Pro
- **데이터베이스**: 로컬 파일 시스템 (JSON/Markdown) -> 추후 Vector DB 확장 예정.
- **스타일링**: Tailwind CSS

## 7. 향후 로드맵
- **2단계**: 체질 진단 알고리즘 도입 (사상체질 등).
- **3단계**: 이미지 인식 (약재 사진을 올리면 무엇인지 판별).
- **4단계**: 음성 상담 기능 추가.
